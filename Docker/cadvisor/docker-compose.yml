networks:
  core_network:
    external: true

services:
  cadvisor:
    image: "gcr.io/cadvisor/cadvisor:v0.45.0"
    container_name: "cadvisor.docker.localhost"
    volumes:
      - "/var/run:/var/run:rw"
      - "/sys:/sys:ro"
      - "/:/rootfs:ro"
    networks:
      - "core_network"
    expose:
      - "8080:8080/tcp"
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.cadvisor.service=cadvisor"
      - "traefik.http.routers.cadvisor.rule=Host(`cadvisor.docker.localhost`)"
      - "traefik.http.services.cadvisor.loadbalancer.server.port=8080"
