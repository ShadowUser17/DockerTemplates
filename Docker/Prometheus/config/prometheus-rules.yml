groups:
  - name: "Prometheus self-monitoring"
    rules:
      - alert: "PrometheusJobMissing"
        expr: "absent(up{job=\"prometheus\"})"
        for: "10s"
        labels:
          severity: "warning"
        annotations:
          summary: "Prometheus job missing (instance {{ $labels.instance }})"
          description: "A Prometheus job has disappeared\n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}"

      - alert: "PrometheusTargetMissing"
        expr: "up == 0"
        for: "10s"
        labels:
          severity: "critical"
        annotations:
          summary: "Prometheus target missing (instance {{ $labels.instance }})"
          description: "A Prometheus target has disappeared. An exporter might be crashed.\n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}"
