apiVersion: "v1"
kind: "ConfigMap"
metadata:
  namespace: "prometheus-cluster"
  name: "grafana-datasources"

data:
  prometheus.yml: |-
    apiVersion: 1
    datasources:
      - name: "Prometheus"
        type: "prometheus"
        access: "proxy"
        url: "http://prometheus.prometheus-cluster.svc:9090"
        jsonData:
          httpMethod: "POST"

  alertmanager.yml: |-
    apiVersion: 1
    datasources:
      - name: "Alertmanager"
        type: "alertmanager"
        url: "http://alertmanager.prometheus-cluster.svc:9093"
        access: "proxy"
        jsonData:
          implementation: "prometheus"
