groups:
  - name: "KubeStateMetric job rules"
    rules:
      - alert: "Kubernetes Job failed"
        expr: "kube_job_status_failed == 1"
        for: "2m"
        labels:
          severity: "warning"
        annotations:
          summary: "Kubernetes job failed (instance {{ $labels.namespace }}/{{ $labels.job_name }})"
          description: "Kubernetes job {{ $labels.namespace }}/{{ $labels.job_name }} failed to complete."

      - alert: "Kubernetes Cronjob suspended"
        expr: 'kube_cronjob_spec_suspend != 0'
        for: "2m"
        labels:
          severity: "warning"
        annotations:
          summary: "Kubernetes CronJob suspended (instance {{ $labels.namespace }}/{{ $labels.cronjob }})"
          description: "Kubernetes CronJob {{ $labels.namespace }}/{{ $labels.cronjob }} is suspended."


  - name: "KubeStateMetric volume rules"
    rules:
      - alert: "Kubernetes Persistentvolumeclaim pending"
        expr: 'kube_persistentvolumeclaim_status_phase{phase="Pending"} == 1'
        for: "2m"
        labels:
          severity: "warning"
        annotations:
          summary: "Kubernetes PersistentVolumeClaim pending (instance {{ $labels.namespace }}/{{ $labels.persistentvolumeclaim }})"
          description: "Kubernetes PersistentVolumeClaim {{ $labels.namespace }}/{{ $labels.persistentvolumeclaim }} is pending."
